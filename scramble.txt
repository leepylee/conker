
func main()
  num[] heights
  num height = 0
  for x to 4000
    if rnd(10) > 4 and height < 500
      height++
    else if height > 2
      height--
    end
    add heights, height
  end
  console false

  num x = 0

  // fps
  num timeOld = now()
  num frame
  num totalTime    
end

func draw()
  style FILL
  for i to 300
    paint RED    
    num h = heights[i + x]
    num pos = i * 5
    num top = SCREENH - h * 5
    rect pos, top, pos + 5, SCREENH
    paint WHITE
    rect i * 5, top, pos + 5, top - 5
  end
  x++

  // fps
  frame++
  num timeNow = now()
  num fps = 1000 / (timeNow - timeOld)
  totalTime += fps
  if frame > 10
    textsize 50
    paint RED
    num avg = round(totalTime/frame)
    text MIDX, MIDY, string(avg)
  end
  timeOld = timeNow
end  
