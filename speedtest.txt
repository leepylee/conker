func main()
  // make choice
  num qty
  num button
  num listItem
  num pixlen
  num pathQty
  dialog 'Quantity', qty, 'Pixel length', pixlen, 'Path Contents', pathQty, listItem, 'Circles;Rectangles;Lines;Bitmaps;Paths', button, 'OK;Cancel'
  if button == 1
    stop
  end
  console false

  // bitmap
  bitmap b, 16, 16
  canvasmap b
  line 0,0,15,15
  line 0,15,15,0

  // path
  num p
  if listItem == 4
    str[] elements
    for i to pathQty
      num x = rnd(SCREENW)
      num y = rnd(SCREENH)
      format s, 'R{0} {1} {2} {3} 0', x, y, x + pixlen, y + pixlen
      add elements, s
    end
    str sp = join(elements, ' ')
    path p1, sp
    p = p1
  end

  // fps
  num timeOld = now()
  num frame
  num totalTime
    
end

func draw()
  style FILL
  for i to qty
    paint 255, rnd(256), rnd(256), rnd(256)
    num x = rnd(SCREENW)
    num y = rnd(SCREENH)
    if listItem == 0
      circle x, y, pixlen
    else if listItem == 1
      rect x, y, x + pixlen, y + pixlen
    else if listItem == 2
      line x, y, x + pixlen, y + pixlen
    else if listItem == 3
      drawbitmap b, x, y
    else if listItem == 4
      drawpath p, i, i
    end 
  end

  // fps
  frame++
  num timeNow = now()
  num fps = 1000 / (timeNow - timeOld)
  totalTime += fps
  if frame > 10
    textsize 50
    paint RED
    num avg = round(totalTime/frame)
    text MIDX, MIDY, avg + ' ' + qty
  end
  timeOld = timeNow
end  
