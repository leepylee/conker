func main()
  num[] sprites
  for x to 10
    bitmap b, 16, 16
    canvasmap b
    paint 255, rnd(256), rnd(256), rnd(256)
    line 0,0,15,15
    line 0,15,15,0
    add sprites, b
  end

  num worldx = 10
  num worldy = 10
  num screenwidth = 5
  num screenheight = 5

  num[] tiles
  for y to worldy
    for x to worldx
      add tiles, sprites[rnd(10)]
    end
  end

  num tilex // screen portal
  num tiley

  num tileh = 100
  num tilew = 100

  num pixelx 
  num pixely
end

func draw()
  num ty = tiley
  num sy = 0
  while ty < worldY and sy < screenheight
    num tx = tilex
    num sx = 0
    while tx < worldY and sx < screenwidth
	    num b = tiles[tx + ty * worldx]
       drawbitmap b, sx * tilew - pixelx, sy * tileh - pixely, tilew, tileh
      sx++
      tx++
    end
    sy++
    ty++
  end
  pixelx++
  if pixelx > tilew
    tilex++
    pixelx = 0
  end    
end
